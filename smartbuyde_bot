import logging
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, filters, ContextTypes, CallbackQueryHandler

TOKEN = "7579483611:AAEOEmbz2n6oad_kVC0LLIBjvp6XfSdQYsw"

logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ SmartBuyDE! –û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é —Ç–æ–≤–∞—Ä—É:",
        reply_markup=InlineKeyboardMarkup([
            [InlineKeyboardButton("üì± –¢–µ–ª–µ—Ñ–æ–Ω–∏", callback_data='phones')],
            [InlineKeyboardButton("üëü –û–¥—è–≥ / –í–∑—É—Ç—Ç—è", callback_data='clothes')],
            [InlineKeyboardButton("üíª –ö–æ–º–ø'—é—Ç–µ—Ä–∏", callback_data='computers')],
            [InlineKeyboardButton("üß∞ –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏", callback_data='tools')],
        ])
    )

async def handle_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    await query.edit_message_text(text=f"üîç –ü–æ—à—É–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó: {query.data} (–≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ)")

if __name__ == '__main__':
    app = ApplicationBuilder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(handle_callback))

    app.run_polling()
